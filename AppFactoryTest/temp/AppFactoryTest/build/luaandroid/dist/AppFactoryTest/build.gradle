//Android Gradle build Script:Start
import org.apache.tools.ant.taskdefs.condition.Os
import java.util.regex.Pattern

buildscript {
    repositories {
		//Gradle External Repositories
        jcenter()
    }
    dependencies {
		//Gradle Build External Dependencies
        classpath 'com.android.tools.build:gradle:2.2.2'
    }
}
apply plugin: 'com.android.application'

def doExtractStringFromManifest(name) {
     def manifestFile = file(android.sourceSets.main.manifest.srcFile)
     def pattern = Pattern.compile(name + "=\"(\\S+)\"")
     def matcher = pattern.matcher(manifestFile.getText())
     matcher.find()
     return matcher.group(1)
}

dependencies {
	//Android Project Dependencies :Start
	
	
	compile 'com.android.support:multidex:1.0.0'
    compile 'com.android.support:recyclerview-v7:23.3.0'
    compile 'com.android.support:support-v4:24.1.1'
    compile fileTree(dir: 'libs', include:[ '*.jar'])	
	
	//Android Project Dependencies :End
}

fileTree(dir: 'libs', include: '**/*.aar')
        .each { File file ->
    dependencies.add("compile", [name: file.name.lastIndexOf('.').with { it != -1 ? file.name[0..<it] : file.name }, ext: 'aar'])
}

android {
	//Android build options:Start
	compileSdkVersion 'android-14'
    buildToolsVersion '25.0.0'
	packagingOptions {
		//Project packaging options:Start
		exclude 'META-INF/DEPENDENCIES'
		exclude 'META-INF/LICENSE'
		exclude 'META-INF/LICENSE.txt'
		exclude 'META-INF/license.txt'
		exclude 'META-INF/NOTICE'
		exclude 'META-INF/NOTICE.txt'
		exclude 'META-INF/notice.txt'
		exclude 'META-INF/ASL2.0'
		exclude 'MANIFEST.MF'
		//Project packaging options:End
	}	
    defaultConfig {
		//Project Default Config:Start
        multiDexEnabled true
        sourceSets.main {
			//Project folder mapping:Start
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            resources.srcDirs = ['src']
            aidl.srcDirs = ['src']
            renderscript.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = ['assets']
            jni.srcDirs = [] //disable automatic ndk-build call
            jniLibs.srcDir 'libs' //set .so files location to libs
			//Project folder mapping:End
        }
		dexOptions { 
		//Dexing Options:Start
		javaMaxHeapSize "2048M"
		//Dexing Options:End
		}
		renderscriptTargetApi 19
        renderscriptSupportModeEnabled true
		applicationId = doExtractStringFromManifest("package")
		//ABI Filters:Start
		ndk {
            abiFilters 'armeabi-v7a' 
		}		
		//ABI Filters:End		
		//Project Default Config:End
    }
	//Android build options:End
}
allprojects {
    repositories {
		//Gradle Build Depencency Repositories
        jcenter()
        flatDir { 
			dirs 'libs'
        }		
		def hasCordovaLibs = file('CordovaAssetsLib/libs').exists()
		if (hasCordovaLibs) {
			flatDir { 
				dirs 'CordovaAssetsLib/libs'
			}	
		}	
    }
}

//Android Gradle build Script:End
